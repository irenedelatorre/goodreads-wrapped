"0",""
"0","message("">> Started scraping metadata (genres + language)"")"
"2",">> Started scraping metadata (genres + language)
"
"0","# This is going to take a while"
"0","# ðŸ“‰ 15 seconds/book"
"0","# ðŸ“‰ From 200 books = 50 seconds â†’ 2â€“10 minutes"
"0",""
"0","# Optional cache to avoid re-scraping the same URL in a single run"
"0","if (!exists("".meta_cache"", inherits = FALSE)) {"
"0","  .meta_cache <- new.env(parent = emptyenv())"
"0","}"
"0",""
"0","n <- nrow(df_read_with_progress)"
"0",""
"0","message(paste("
"0","  ""This is going to take a while, you have"","
"0","  n,"
"0","  ""books. That's around"","
"0","  n * 15 / 60,"
"0","  ""minutes maximum (very rough estimate)."""
"0","))"
"2","This is going to take a while, you have 261 books. That's around 65.25 minutes maximum (very rough estimate).
"
"0","pb <- utils::txtProgressBar(min = 0, max = n, style = 3)"
"1","  |                                                                               "
"1","  |                                                                         |   0%"
"0","i  <- 0L"
"0",""
"0","df_with_meta <- df_read_with_progress %>%"
"0","  dplyr::mutate("
"0","    .meta = purrr::map(book_url, ~{"
"0","      i <<- i + 1L"
"0","      if (i %% 10L == 0L) {"
"0","        message(sprintf(""[%d/%d] (%.1f%%)"", i, n, 100 * i / n))"
"0","      }"
"0","      utils::setTxtProgressBar(pb, i)"
"0","      get_meta_cached(.x)"
"0","    })"
"0","  ) %>%"
"0","  dplyr::mutate("
"0","    genres_vec = purrr::map(.meta, ~ .x$genres_vec %||% character()),"
"0","    genres     = purrr::map_chr(.meta, ~ .x$genres     %||% NA_character_),"
"0","    language   = purrr::map_chr(.meta, ~ .x$language   %||% NA_character_)"
"0","  ) %>%"
"0","  dplyr::select(-.meta)"
"1","  |                                                                               "
"1","  |=                                                                        |   1%"
"1","  |                                                                               "
"1","  |=                                                                        |   2%"
"1","  |                                                                               "
"1","  |==                                                                       |   2%"
"1","  |                                                                               "
"1","  |==                                                                       |   3%"
"1","  |                                                                               "
"1","  |===                                                                      |   3%"
"2","[10/261] (3.8%)
"
"1","  |                                                                               "
"1","  |===                                                                      |   4%"
"1","  |                                                                               "
"1","  |===                                                                      |   5%"
"1","  |                                                                               "
"1","  |====                                                                     |   5%"
"1","  |                                                                               "
"1","  |====                                                                     |   6%"
"1","  |                                                                               "
"1","  |=====                                                                    |   7%"
"2","[20/261] (7.7%)
"
"1","  |                                                                               "
"1","  |======                                                                   |   8%"
"1","  |                                                                               "
"1","  |======                                                                   |   9%"
"1","  |                                                                               "
"1","  |=======                                                                  |   9%"
"1","  |                                                                               "
"1","  |=======                                                                  |  10%"
"1","  |                                                                               "
"1","  |========                                                                 |  10%"
"1","  |                                                                               "
"1","  |========                                                                 |  11%"
"2","[30/261] (11.5%)
"
"1","  |                                                                               "
"1","  |=========                                                                |  12%"
"1","  |                                                                               "
"1","  |=========                                                                |  13%"
"1","  |                                                                               "
"1","  |==========                                                               |  13%"
"1","  |                                                                               "
"1","  |==========                                                               |  14%"
"1","  |                                                                               "
"1","  |===========                                                              |  15%"
"2","[40/261] (15.3%)
"
"1","  |                                                                               "
"1","  |===========                                                              |  16%"
"1","  |                                                                               "
"1","  |============                                                             |  16%"
"1","  |                                                                               "
"1","  |============                                                             |  17%"
"1","  |                                                                               "
"1","  |=============                                                            |  17%"
"1","  |                                                                               "
"1","  |=============                                                            |  18%"
"1","  |                                                                               "
"1","  |==============                                                           |  19%"
"2","[50/261] (19.2%)
"
"1","  |                                                                               "
"1","  |==============                                                           |  20%"
"1","  |                                                                               "
"1","  |===============                                                          |  20%"
"1","  |                                                                               "
"1","  |===============                                                          |  21%"
"1","  |                                                                               "
"1","  |================                                                         |  21%"
"1","  |                                                                               "
"1","  |================                                                         |  22%"
"1","  |                                                                               "
"1","  |=================                                                        |  23%"
"2","[60/261] (23.0%)
"
"1","  |                                                                               "
"1","  |=================                                                        |  24%"
"1","  |                                                                               "
"1","  |==================                                                       |  24%"
"1","  |                                                                               "
"1","  |==================                                                       |  25%"
"1","  |                                                                               "
"1","  |===================                                                      |  26%"
"2","
Selenium message:No active session with ID 75862677-aa05-460a-b76a-fca806da0f18

"
"2","
Selenium message:No active session with ID 75862677-aa05-460a-b76a-fca806da0f18

"
"2","
Selenium message:No active session with ID 75862677-aa05-460a-b76a-fca806da0f18

"
"2","[70/261] (26.8%)
"
"1","  |                                                                               "
"1","  |====================                                                     |  27%"
"1","  |                                                                               "
"1","  |====================                                                     |  28%"
"1","  |                                                                               "
"1","  |=====================                                                    |  28%"
"1","  |                                                                               "
"1","  |=====================                                                    |  29%"
"1","  |                                                                               "
"1","  |======================                                                   |  30%"
"2","[80/261] (30.7%)
"
"1","  |                                                                               "
"1","  |======================                                                   |  31%"
"1","  |                                                                               "
"1","  |=======================                                                  |  31%"
"1","  |                                                                               "
"1","  |=======================                                                  |  32%"
"1","  |                                                                               "
"1","  |========================                                                 |  33%"
"1","  |                                                                               "
"1","  |=========================                                                |  34%"
"2","[90/261] (34.5%)
"
"1","  |                                                                               "
"1","  |=========================                                                |  35%"
"1","  |                                                                               "
"1","  |==========================                                               |  35%"
"1","  |                                                                               "
"1","  |==========================                                               |  36%"
"1","  |                                                                               "
"1","  |===========================                                              |  36%"
"1","  |                                                                               "
"1","  |===========================                                              |  37%"
"1","  |                                                                               "
"1","  |===========================                                              |  38%"
"1","  |                                                                               "
"1","  |============================                                             |  38%"
"2","[100/261] (38.3%)
"
"1","  |                                                                               "
"1","  |============================                                             |  39%"
"1","  |                                                                               "
"1","  |=============================                                            |  39%"
"1","  |                                                                               "
"1","  |=============================                                            |  40%"
"1","  |                                                                               "
"1","  |==============================                                           |  41%"
"1","  |                                                                               "
"1","  |==============================                                           |  42%"
"2","[110/261] (42.1%)
"
"1","  |                                                                               "
"1","  |===============================                                          |  42%"
"1","  |                                                                               "
"1","  |===============================                                          |  43%"
"1","  |                                                                               "
"1","  |================================                                         |  43%"
"1","  |                                                                               "
"1","  |================================                                         |  44%"
"1","  |                                                                               "
"1","  |=================================                                        |  45%"
"1","  |                                                                               "
"1","  |=================================                                        |  46%"
"2","[120/261] (46.0%)
"
"1","  |                                                                               "
"1","  |==================================                                       |  46%"
"1","  |                                                                               "
"1","  |==================================                                       |  47%"
"1","  |                                                                               "
"1","  |===================================                                      |  48%"
"1","  |                                                                               "
"1","  |====================================                                     |  49%"
"2","[130/261] (49.8%)
"
"1","  |                                                                               "
"1","  |====================================                                     |  50%"
"1","  |                                                                               "
"1","  |=====================================                                    |  50%"
"1","  |                                                                               "
"1","  |=====================================                                    |  51%"
"1","  |                                                                               "
"1","  |======================================                                   |  52%"
"1","  |                                                                               "
"1","  |=======================================                                  |  53%"
"2","[140/261] (53.6%)
"
"1","  |                                                                               "
"1","  |=======================================                                  |  54%"
"1","  |                                                                               "
"1","  |========================================                                 |  54%"
"1","  |                                                                               "
"1","  |========================================                                 |  55%"
"1","  |                                                                               "
"1","  |=========================================                                |  56%"
"1","  |                                                                               "
"1","  |=========================================                                |  57%"
"1","  |                                                                               "
"1","  |==========================================                               |  57%"
"2","[150/261] (57.5%)
"
"1","  |                                                                               "
"1","  |==========================================                               |  58%"
"1","  |                                                                               "
"1","  |===========================================                              |  58%"
"1","  |                                                                               "
"1","  |===========================================                              |  59%"
"1","  |                                                                               "
"1","  |============================================                             |  60%"
"1","  |                                                                               "
"1","  |============================================                             |  61%"
"2","[160/261] (61.3%)
"
"1","  |                                                                               "
"1","  |=============================================                            |  61%"
"1","  |                                                                               "
"1","  |=============================================                            |  62%"
"1","  |                                                                               "
"1","  |==============================================                           |  62%"
"1","  |                                                                               "
"1","  |==============================================                           |  63%"
"1","  |                                                                               "
"1","  |==============================================                           |  64%"
"1","  |                                                                               "
"1","  |===============================================                          |  64%"
"1","  |                                                                               "
"1","  |===============================================                          |  65%"
"2","[170/261] (65.1%)
"
"1","  |                                                                               "
"1","  |================================================                         |  65%"
"1","  |                                                                               "
"1","  |================================================                         |  66%"
"1","  |                                                                               "
"1","  |=================================================                        |  67%"
"1","  |                                                                               "
"1","  |==================================================                       |  68%"
"1","  |                                                                               "
"1","  |==================================================                       |  69%"
"2","[180/261] (69.0%)
"
"1","  |                                                                               "
"1","  |===================================================                      |  69%"
"1","  |                                                                               "
"1","  |===================================================                      |  70%"
"1","  |                                                                               "
"1","  |====================================================                     |  71%"
"1","  |                                                                               "
"1","  |====================================================                     |  72%"
"1","  |                                                                               "
"1","  |=====================================================                    |  72%"
"2","[190/261] (72.8%)
"
"1","  |                                                                               "
"1","  |=====================================================                    |  73%"
"1","  |                                                                               "
"1","  |======================================================                   |  74%"
"1","  |                                                                               "
"1","  |=======================================================                  |  75%"
"1","  |                                                                               "
"1","  |=======================================================                  |  76%"
"1","  |                                                                               "
"1","  |========================================================                 |  76%"
"2","[200/261] (76.6%)
"
"1","  |                                                                               "
"1","  |========================================================                 |  77%"
"1","  |                                                                               "
"1","  |=========================================================                |  78%"
"1","  |                                                                               "
"1","  |=========================================================                |  79%"
"1","  |                                                                               "
"1","  |==========================================================               |  79%"
"1","  |                                                                               "
"1","  |==========================================================               |  80%"
"2","[210/261] (80.5%)
"
"1","  |                                                                               "
"1","  |===========================================================              |  80%"
"1","  |                                                                               "
"1","  |===========================================================              |  81%"
"1","  |                                                                               "
"1","  |============================================================             |  82%"
"1","  |                                                                               "
"1","  |============================================================             |  83%"
"1","  |                                                                               "
"1","  |=============================================================            |  83%"
"1","  |                                                                               "
"1","  |=============================================================            |  84%"
"2","[220/261] (84.3%)
"
"1","  |                                                                               "
"1","  |==============================================================           |  84%"
"1","  |                                                                               "
"1","  |==============================================================           |  85%"
"1","  |                                                                               "
"1","  |===============================================================          |  86%"
"1","  |                                                                               "
"1","  |===============================================================          |  87%"
"1","  |                                                                               "
"1","  |================================================================         |  87%"
"1","  |                                                                               "
"1","  |================================================================         |  88%"
"2","[230/261] (88.1%)
"
"1","  |                                                                               "
"1","  |=================================================================        |  89%"
"1","  |                                                                               "
"1","  |=================================================================        |  90%"
"1","  |                                                                               "
"1","  |==================================================================       |  90%"
"1","  |                                                                               "
"1","  |==================================================================       |  91%"
"1","  |                                                                               "
"1","  |===================================================================      |  91%"
"1","  |                                                                               "
"1","  |===================================================================      |  92%"
"2","[240/261] (92.0%)
"
"1","  |                                                                               "
"1","  |====================================================================     |  93%"
"1","  |                                                                               "
"1","  |=====================================================================    |  94%"
"1","  |                                                                               "
"1","  |=====================================================================    |  95%"
"1","  |                                                                               "
"1","  |======================================================================   |  95%"
"2","[250/261] (95.8%)
"
"1","  |                                                                               "
"1","  |======================================================================   |  96%"
"1","  |                                                                               "
"1","  |======================================================================   |  97%"
"1","  |                                                                               "
"1","  |=======================================================================  |  97%"
"1","  |                                                                               "
"1","  |=======================================================================  |  98%"
"1","  |                                                                               "
"1","  |======================================================================== |  98%"
"1","  |                                                                               "
"1","  |======================================================================== |  99%"
"2","[260/261] (99.6%)
"
"1","  |                                                                               "
"1","  |=========================================================================| 100%"
"0","close(pb)"
"1","
"
"0","message("">> Finished scraping metadata (genres + language)"")"
"2",">> Finished scraping metadata (genres + language)
"
